<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShowGo Slideshow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Basic styles for full screen and elements */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent scrollbars */
            background-color: #000; /* Black background */
            color: #fff; /* Default white text */
            font-family: sans-serif;
            /* cursor: none; <-- REMOVED static rule */
            user-select: none; /* Standard */
            -webkit-user-select: none; /* Safari/Chrome */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* IE/Edge */
        }
        /* --- NEW: Class to hide cursor when in fullscreen --- */
        body.fullscreen-active {
            cursor: none;
        }
        /* ---------------------------------------------------- */
        #slideshow-container { position: relative; width: 100%; height: 100%; }
        .slide-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 1s ease-in-out; background-color: #000; }
        .slide-image.active { opacity: 1; }
        #widget-container { position: absolute; bottom: 20px; left: 20px; right: 20px; display: flex; justify-content: space-between; align-items: flex-end; z-index: 10; pointer-events: none; text-shadow: 1px 1px 3px rgba(0,0,0,0.7); }
        .widget { background-color: rgba(0, 0, 0, 0.5); padding: 0.5rem 1rem; border-radius: 0.375rem; font-size: 1.1rem; margin: 0 10px; }
        #time-widget {}
        #weather-widget { text-align: right; }
        #watermark { position: absolute; z-index: 20; background-color: rgba(0, 0, 0, 0.5); padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.9rem; pointer-events: none; bottom: 10px; right: 10px; }
        #status-message-display { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #ccc; text-align: center; z-index: 5; }
        #rss-ticker-container { position: absolute; bottom: 80px; left: 0; width: 100%; background-color: rgba(0, 0, 0, 0.6); padding: 0.5rem 0; overflow: hidden; white-space: nowrap; z-index: 11; box-sizing: border-box; }
        #rss-ticker-content { display: inline-block; padding-left: 100%; animation: ticker-scroll 60s linear infinite; font-size: 1rem; color: #e5e7eb; }
        #rss-ticker-content span { margin: 0 1.5rem; }
        @keyframes ticker-scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
    </style>
</head>
<body>
    <div id="slideshow-container">
         <div id="status-message-display">
             {% if not images %}
                 <p>No images uploaded.</p>
             {% endif %}
         </div>
    </div>

    {% if config.watermark.enabled %}
    <div id="watermark">{{ config.watermark.text }}</div>
    {% endif %}

    <div id="widget-container">
        {% if config.widgets.time.enabled %}
        <div id="time-widget" class="widget">--:--:--</div>
        {% endif %}
        {% if config.widgets.weather.enabled and weather %}
        <div id="weather-widget" class="widget">
            {{ weather.name }}: {{ weather.main.temp | round(0) }}Â°F, {{ weather.weather[0].description }}
        </div>
        {% elif config.widgets.weather.enabled and not weather %}
         <div id="weather-widget" class="widget text-red-400">Weather unavailable</div>
        {% endif %}
    </div> {% if config.widgets.rss.enabled %}
    <div id="rss-ticker-container">
        <div id="rss-ticker-content">
             {% if not rss_headlines %}
                <span>RSS Feed unavailable or empty.</span>
             {% endif %}
        </div>
    </div>
    {% endif %}

    <script>
        const slideshowData = {
            images: {{ images | tojson }},
            duration: {{ config.slideshow.duration_seconds * 1000 }},
            transitionEffect: {{ config.slideshow.transition_effect | tojson }},
            imageOrder: {{ config.slideshow.image_order | tojson }},
            imageBaseUrl: {{ url_for('serve_uploaded_image', filename='') | tojson }},
            imageScaling: {{ config.slideshow.image_scaling | default('cover') | tojson }},
            widgets: {
                time: {{ config.widgets.time.enabled | tojson }},
                watermark: {
                    enabled: {{ config.watermark.enabled | tojson }},
                    text: {{ config.watermark.text | tojson }},
                    position: {{ config.watermark.position | tojson }}
                },
                rss: {
                    enabled: {{ config.widgets.rss.enabled | tojson }},
                    headlines: {{ rss_headlines | tojson }}
                }
            },
            burnInPrevention: {{ config.burn_in_prevention | tojson }},
            initialTimestamp: {{ initial_config_timestamp | default(0) }}
        };
        // console.log("Slideshow Data:", slideshowData);
    </script>

    <script src="{{ url_for('static', filename='js/slideshow.js') }}"></script>
</body>
</html>
